{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-a2f0bd8314d015cc.js","node_modules/@parcel/runtime-js/lib/runtime-e772f4ea3780bdc4.js","node_modules/@parcel/runtime-js/lib/runtime-1084176e57e02214.js","src/main.ts","node_modules/@parcel/runtime-js/lib/runtime-3bcd6c8f77d0c68c.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"7o1Gz\\\":\\\"index.e5e2f4af.js\\\",\\\"3qVCT\\\":\\\"SoundHelix-Song-1.3a87d076.mp3\\\",\\\"3GS9P\\\":\\\"SoundHelix-Song-2.2c8899eb.mp3\\\",\\\"g3TQm\\\":\\\"SoundHelix-Song-3.0f2a5557.mp3\\\"}\"));","module.exports = require('./helpers/bundle-url').getBundleURL('7o1Gz') + require('./helpers/bundle-manifest').resolve(\"3qVCT\");","module.exports = require('./helpers/bundle-url').getBundleURL('7o1Gz') + require('./helpers/bundle-manifest').resolve(\"3GS9P\");","function inicializa() {\n  const audio = new Audio();\n  const selectKeys = ['Enter', 'Space'];\n  \n  let tocandoAgora = 0;\n  \n  let barsColor = '#0084ff';\n\n  // Seleciona os elementos com querySelector\n  const form = document.querySelector('form');\n  const em = document.querySelector('em');\n  const select = document.querySelector('select');\n  const canvas = document.querySelector('canvas');\n  const playIcon = document.querySelector<SVGAElement>('#play-icon');\n  const pauseIcon = document.querySelector<SVGElement>('#pause-icon');\n\n  // Usado pra capturar botões\n  function getButton(id: string) {\n    return form?.querySelector<HTMLButtonElement>('#' + id);\n  }\n\n  // Usado pra capturar controles\n  function getInput(id: string) {\n    return form?.querySelector<HTMLInputElement>('#' + id);\n  }\n\n  // Captura botões\n  const play = getButton('play');\n  const anterior = getButton('anterior');\n  const proxima = getButton('proxima');\n\n  const tempo = getInput('tempo');\n  const volume = getInput('volume');\n  const color = getInput('color');\n\n  // Interface da música\n  interface AudioTrack {\n    artist: string;\n    title?: string;\n    album?: string;\n    year?: number;\n    url: string;\n  }\n\n  // Playlist\n  const listaDeMusicas: AudioTrack[] = [\n    { url: new URL('./assets/SoundHelix-Song-1.mp3', import.meta.url).pathname, artist: 'SoundHelix Song 1' },\n    { url: new URL('./assets/SoundHelix-Song-2.mp3', import.meta.url).pathname, artist: 'SoundHelix Song 2' },\n    { url: new URL('./assets/SoundHelix-Song-3.mp3', import.meta.url).pathname, artist: 'SoundHelix Song 3' },\n  ];\n\n  // Adiciona músicas no select\n  listaDeMusicas.forEach((musica, numero) => {\n    select.add(new Option(musica.artist, `${numero}`));\n  });\n\n  // Atualiza o slider conforme o audio\n  audio.ontimeupdate = () => {\n    if (tempo) {\n      tempo.value = audio.currentTime.toString();\n\n      const s = tempo.valueAsNumber % 60 | 0;\n      const m = (tempo.valueAsNumber / 60) % 60 | 0;\n      tempo.nextElementSibling!.textContent = `${m < 10 ? '0' : ''}${m}:${\n        s < 10 ? '0' : ''\n      }${s}`;\n    }\n  };\n\n  color.value = barsColor;\n\n  color.oninput = () => {\n    barsColor = color.value;\n    document.documentElement.style.setProperty('--color-primary', barsColor);\n  };\n\n  audio.onloadedmetadata = () => {\n    tempo.max = `${audio.duration}`;\n  };\n\n  // Ao arrastar o slider, sincroniza o audio\n  tempo.oninput = () => {\n    audio.currentTime = tempo.valueAsNumber;\n  };\n\n  // Ao arrastar o slider, altera o volume\n  volume.oninput = () => {\n    audio.volume = volume.valueAsNumber / 100;\n\n    volume.nextElementSibling!.textContent = `${volume.valueAsNumber}%`;\n  };\n\n  // Esconde o play e mostra o pause\n  audio.onplay = () => {\n    frameLooper();\n\n    playIcon.style.display = 'none';\n    pauseIcon.style.display = 'block';\n    \n    em.textContent = listaDeMusicas[tocandoAgora].artist;\n  };\n\n  // Esconde o pause e mostra o play\n  audio.onpause = () => {\n    playIcon.style.display = 'block';\n    pauseIcon.style.display = 'none';\n  };\n\n  // Ao clicar no play, toca a música\n  play.onclick = () => {\n    // Se não tiver nada selecionado\n    if (!select.value) {\n      // Toca a primeira música\n      select.value = '0';      \n      listaDeMusicas[+select.value].url;\n    }\n\n    // Se não tiver nada tocando, da play\n    if (audio.paused) {\n      audio.play();\n      // Se estiver tocando, pausa\n    } else {\n      audio.pause();\n    }\n  };\n\n  // Ao clicar no anterior, toca a música anterior\n  anterior.onclick = () => {\n    // Se a música selecionada não for a primeira da lista\n    if (tocandoAgora > 0) {\n      // Toca a música anterior\n      tocandoAgora--;\n\n      // Se for a primeira da lista, toca a última\n    } else {\n      tocandoAgora = listaDeMusicas.length - 1;\n    }\n\n    select.value = `${tocandoAgora}`;\n\n    audio.src = listaDeMusicas[tocandoAgora].url;\n    audio.play();\n  };\n\n  // Ao clicar no próxima, toca a próxima música\n  proxima.onclick = () => {\n    // Se a música selecionada não for a última da lista\n    if (tocandoAgora < listaDeMusicas.length - 1) {\n      // Toca a próxima música\n      tocandoAgora++;\n\n      // Se não for a última da lista, toca a primeira\n    } else {\n      tocandoAgora = 0;\n    }\n\n    select.value = `${tocandoAgora}`;\n\n    audio.src = listaDeMusicas[tocandoAgora].url;\n    audio.play();\n  };\n\n  // Ao dar 2 cliques em uma música, toca a música\n  select.ondblclick = () => trocaMusica();\n\n  /**\n   * Verifica se a tecla pressionada faz parte da lista\n   * que definimos como teclas selecionáveis.\n   * Caso seja verdade, toca a música.\n   */\n  select.onkeydown = (event) => {\n    if (selectKeys.includes(event.code)) {\n      trocaMusica();\n    }\n  };\n\n  function trocaMusica() {\n    // O + converte str pra int\n    const numero = +select.value;\n\n    audio.src = listaDeMusicas[numero].url;\n    audio.play();\n\n    tocandoAgora = numero;\n  }\n\n  /* ================================== */\n\n  const audioCtx = new AudioContext();\n  const canvasCtx = canvas.getContext('2d');\n\n  audio.src = listaDeMusicas[0].url;\n  audio.crossOrigin = 'anonymous';\n\n  const audioSourceNode = audioCtx.createMediaElementSource(audio);\n\n  const analyserNode = audioCtx.createAnalyser();\n  const bufferLength = analyserNode.frequencyBinCount;\n  const dataArray = new Uint8Array(bufferLength);\n\n  audioSourceNode.connect(analyserNode);\n  analyserNode.connect(audioCtx.destination);\n\n  let bars: number;\n  let barX: number;\n  let barWidth: number;\n  let barHeight: number;\n  \n  let render = () => {\n    canvas.width = innerWidth - 40;\n\n    canvasCtx.clearRect(0, 0, canvas.width, canvas.height);\n    canvasCtx.fillStyle = barsColor;\n    \n    bars = canvas.width;\n    \n    for (let i = 0; i < bars; i++) {\n      barWidth = canvas.width / bars;\n      barX = i * (barWidth + 2);\n      barHeight = -dataArray[i] / 1.6;\n      canvasCtx.fillRect(barX, canvas.height, barWidth, barHeight);\n    }\n  };\n\n  let frameLooper = () => {\n    requestAnimationFrame(frameLooper);\n    analyserNode.getByteFrequencyData(dataArray);\n    render();\n  };\n}\n\n\nlet loaded = false;\n\ndocument.onclick = () => {\n  if (!loaded) {\n    inicializa();\n  }\n  loaded = true;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('7o1Gz') + require('./helpers/bundle-manifest').resolve(\"g3TQm\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$fad1a20a632eb8d5$exports","getBundleURL","resolve","$63fec2eaa38ac43c$exports","$02b2fc1f0fd6e808$var$inicializa","audio","Audio","selectKeys","tocandoAgora","barsColor","form","document","querySelector","em","select","canvas","playIcon","pauseIcon","getButton","getInput","play","anterior","proxima","tempo","volume","color","listaDeMusicas","URL","pathname","artist","$3a7aced4d282ca85$exports","trocaMusica","numero","src","forEach","musica","add","Option","concat","ontimeupdate","currentTime","toString","s","valueAsNumber","m","nextElementSibling","textContent","oninput","documentElement","style","setProperty","onloadedmetadata","max","duration","onplay","frameLooper","display","onpause","onclick","paused","pause","ondblclick","onkeydown","event","includes","code","audioCtx","AudioContext","canvasCtx","getContext","crossOrigin","bars","barX","barWidth","barHeight","audioSourceNode","createMediaElementSource","analyserNode","createAnalyser","bufferLength","frequencyBinCount","dataArray","Uint8Array","connect","destination","requestAnimationFrame","getByteFrequencyData","width","innerWidth","clearRect","height","fillStyle","fillRect","render","$02b2fc1f0fd6e808$var$loaded"],"version":3,"file":"index.e5e2f4af.js.map"}